#!/bin/bash

# Compiles LaTeX and then deletes auxiliary files created during compilation.

if [[ "$#" -ne 1 ]]; then
  scriptname="$(basename "$(test -L "$0" && readlink "$0" || echo "$0")")"
  echo "Usage: $scriptname <texfile>"
fi

texfile=$(basename -s .tex $1)
dir=$(dirname $1)

pdflatex -output-directory=$dir $dir/$texfile
pdflatex -output-directory=$dir $dir/$texfile # Twice, for refs and such

for ext in aux log nav out snm toc; do
  rm ${dir}/${texfile}.$ext
done

rm ${dir}/q.log
